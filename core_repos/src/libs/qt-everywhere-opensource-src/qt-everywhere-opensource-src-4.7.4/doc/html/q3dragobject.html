<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- q3dragobject.cpp -->
  <title>Qt 4.7: Q3DragObject Class Reference</title>
  <link rel="stylesheet" type="text/css" href="style/offline.css" />
</head>
<body>
<div class="header" id="qtdocheader">
  <div class="content"> 
    <a href="index.html" class="qtref"><span>Qt Reference Documentation</span></a>
  </div>
  <div class="breadcrumb toolblock">
    <ul>
      <li class="first"><a href="index.html">Home</a></li>
      <!--  Breadcrumbs go here -->
<li><a href="modules.html">Modules</a></li>
<li>Qt3SupportLight</li>
<li>Q3DragObject</li>
    </ul>
  </div>
</div>
<div class="content mainContent">
<div class="toc">
<h3><a name="toc">Contents</a></h3>
<ul>
<li class="level1"><a href="#public-types">Public Types</a></li>
<li class="level1"><a href="#public-functions">Public Functions</a></li>
<li class="level1"><a href="#static-public-members">Static Public Members</a></li>
<li class="level1"><a href="#protected-functions">Protected Functions</a></li>
<li class="level1"><a href="#details">Detailed Description</a></li>
</ul>
</div>
<h1 class="title">Q3DragObject Class Reference</h1>
<!-- $$$Q3DragObject-brief -->
<p>The Q3DragObject class encapsulates MIME-based data transfer. <a href="#details">More...</a></p>
<!-- @@@Q3DragObject -->
<pre class="cpp"> <span class="preprocessor">#include &lt;Q3DragObject&gt;</span></pre><p><b>This class is part of the Qt 3 support library.</b> It is provided to keep old source code working. We strongly advise against using it in new code. See <a href="porting4.html#qdragobject">Porting to Qt 4</a> for more information.</p>
<p><b>Inherits: </b><a href="qobject.html">QObject</a> and <a href="qmimesource.html" class="obsolete">QMimeSource</a>.</p>
<p><b>Inherited by: </b><a href="q3icondrag.html">Q3IconDrag</a>, <a href="q3imagedrag.html">Q3ImageDrag</a>, <a href="q3storeddrag.html">Q3StoredDrag</a>, and <a href="q3textdrag.html">Q3TextDrag</a>.</p>
<ul>
<li><a href="q3dragobject-members.html">List of all members, including inherited members</a></li>
</ul>
<a name="public-types"></a>
<h2>Public Types</h2>
<table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> enum </td><td class="memItemRight bottomAlign"><b><a href="q3dragobject.html#DragMode-enum">DragMode</a></b> { DragDefault, DragCopy, DragMove, DragLink, DragCopyOrMove }</td></tr>
</table>
<a name="public-functions"></a>
<h2>Public Functions</h2>
<table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="q3dragobject.html#Q3DragObject">Q3DragObject</a></b> ( QWidget * <i>dragSource</i> = 0, const char * <i>name</i> = 0 )</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual </td><td class="memItemRight bottomAlign"><b><a href="q3dragobject.html#dtor.Q3DragObject">~Q3DragObject</a></b> ()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="q3dragobject.html#drag">drag</a></b> ()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="q3dragobject.html#dragCopy">dragCopy</a></b> ()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="q3dragobject.html#dragLink">dragLink</a></b> ()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="q3dragobject.html#dragMove">dragMove</a></b> ()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QPixmap </td><td class="memItemRight bottomAlign"><b><a href="q3dragobject.html#pixmap">pixmap</a></b> () const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QPoint </td><td class="memItemRight bottomAlign"><b><a href="q3dragobject.html#pixmapHotSpot">pixmapHotSpot</a></b> () const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual void </td><td class="memItemRight bottomAlign"><b><a href="q3dragobject.html#setPixmap">setPixmap</a></b> ( QPixmap <i>pm</i>, const QPoint &amp; <i>hotspot</i> )</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual void </td><td class="memItemRight bottomAlign"><b><a href="q3dragobject.html#setPixmap-2">setPixmap</a></b> ( QPixmap <i>pm</i> )</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QWidget * </td><td class="memItemRight bottomAlign"><b><a href="q3dragobject.html#source">source</a></b> ()</td></tr>
</table>
<ul>
<li class="fn">29 public functions inherited from <a href="qobject.html#public-functions">QObject</a></li>
<li class="fn">3 public functions inherited from <a href="qmimesource.html#public-functions">QMimeSource</a></li>
</ul>
<a name="static-public-members"></a>
<h2>Static Public Members</h2>
<table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> QWidget * </td><td class="memItemRight bottomAlign"><b><a href="q3dragobject.html#target">target</a></b> ()</td></tr>
</table>
<ul>
<li class="fn">5 static public members inherited from <a href="qobject.html#static-public-members">QObject</a></li>
</ul>
<a name="protected-functions"></a>
<h2>Protected Functions</h2>
<table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> virtual bool </td><td class="memItemRight bottomAlign"><b><a href="q3dragobject.html#drag-2">drag</a></b> ( DragMode <i>mode</i> )</td></tr>
</table>
<ul>
<li class="fn">7 protected functions inherited from <a href="qobject.html#protected-functions">QObject</a></li>
</ul>
<h3>Additional Inherited Members</h3>
<ul>
<li class="fn">1 property inherited from <a href="qobject.html#properties">QObject</a></li>
<li class="fn">1 public slot inherited from <a href="qobject.html#public-slots">QObject</a></li>
<li class="fn">1 signal inherited from <a href="qobject.html#signals">QObject</a></li>
</ul>
<a name="details"></a>
<!-- $$$Q3DragObject-description -->
<div class="descr">
<h2>Detailed Description</h2>
<p>The Q3DragObject class encapsulates MIME-based data transfer.</p>
<p>Q3DragObject is the base class for all data that needs to be transferred between and within applications, both for drag and drop and for the clipboard.</p>
<p>See the <a href="dnd.html">Drag and drop documentation</a> for an overview of how to provide drag and drop in your application.</p>
<p>See the <a href="qclipboard.html">QClipboard</a> documentation for an overview of how to provide cut and paste in your application.</p>
<p>The <a href="q3dragobject.html#drag">drag</a>() function is used to start a drag operation. You can specify the <a href="q3dragobject.html#DragMode-enum">DragMode</a> in the call or use one of the convenience functions <a href="q3dragobject.html#dragCopy">dragCopy</a>(), <a href="q3dragobject.html#dragMove">dragMove</a>(), or <a href="q3dragobject.html#dragLink">dragLink</a>(). The drag source where the data originated is retrieved with <a href="q3dragobject.html#source">source</a>(). If the data was dropped on a widget within the application, <a href="q3dragobject.html#target">target</a>() will return a pointer to that widget. Specify the pixmap to display during the drag with <a href="q3dragobject.html#setPixmap">setPixmap</a>().</p>
</div>
<!-- @@@Q3DragObject -->
<div class="types">
<h2>Member Type Documentation</h2>
<!-- $$$DragMode$$$DragDefault$$$DragCopy$$$DragMove$$$DragLink$$$DragCopyOrMove -->
<h3 class="fn"><a name="DragMode-enum"></a>enum Q3DragObject::<span class="name">DragMode</span></h3>
<p>This enum describes the possible drag modes.</p>
<table class="valuelist"><tr valign="top" class="odd"><th class="tblConst">Constant</th><th class="tblval">Value</th><th class="tbldscr">Description</th></tr>
<tr><td class="topAlign"><tt>Q3DragObject::DragDefault</tt></td><td class="topAlign"><tt>0</tt></td><td class="topAlign">The mode is determined heuristically.</td></tr>
<tr><td class="topAlign"><tt>Q3DragObject::DragCopy</tt></td><td class="topAlign"><tt>1</tt></td><td class="topAlign">The data is copied.</td></tr>
<tr><td class="topAlign"><tt>Q3DragObject::DragMove</tt></td><td class="topAlign"><tt>2</tt></td><td class="topAlign">The data is moved.</td></tr>
<tr><td class="topAlign"><tt>Q3DragObject::DragLink</tt></td><td class="topAlign"><tt>3</tt></td><td class="topAlign">The data is linked.</td></tr>
<tr><td class="topAlign"><tt>Q3DragObject::DragCopyOrMove</tt></td><td class="topAlign"><tt>4</tt></td><td class="topAlign">The user chooses the mode by using the <b>Shift</b> key to switch from the default copy mode to move mode.</td></tr>
</table>
<!-- @@@DragMode -->
</div>
<div class="func">
<h2>Member Function Documentation</h2>
<!-- $$$Q3DragObject[overload1]$$$Q3DragObjectQWidget*constchar* -->
<h3 class="fn"><a name="Q3DragObject"></a>Q3DragObject::<span class="name">Q3DragObject</span> ( <span class="type"><a href="qwidget.html">QWidget</a></span> * <i>dragSource</i> = 0, const <span class="type">char</span> * <i>name</i> = 0 )</h3>
<p>Constructs a drag object called <i>name</i> with a parent <i>dragSource</i>.</p>
<p>Note that the drag object will be deleted when the <i>dragSource</i> is deleted.</p>
<!-- @@@Q3DragObject -->
<!-- $$$~Q3DragObject[overload1]$$$~Q3DragObject -->
<h3 class="fn"><a name="dtor.Q3DragObject"></a>Q3DragObject::<span class="name">~Q3DragObject</span> ()<tt> [virtual]</tt></h3>
<p>Destroys the drag object, canceling any drag and drop operation in which it is involved.</p>
<!-- @@@~Q3DragObject -->
<!-- $$$drag[overload1]$$$drag -->
<h3 class="fn"><a name="drag"></a><span class="type">bool</span> Q3DragObject::<span class="name">drag</span> ()</h3>
<p>Starts a drag operation using the contents of this object, using <a href="q3dragobject.html#DragMode-enum">DragDefault</a> mode.</p>
<p>The function returns true if the caller should delete the original copy of the dragged data (but see <a href="q3dragobject.html#target">target</a>()); otherwise returns false.</p>
<p>If the drag contains <i>references</i> to information (e.g&#x2e; file names in a <a href="q3uridrag.html" class="compat">Q3UriDrag</a> are references) then the return value should always be ignored, as the target is expected to directly manipulate the content referred to by the drag object. On X11 the return value should always be correct anyway, but on Windows this is not necessarily the case; e.g&#x2e; the file manager starts a background process to move files, so the source <i>must not</i> delete the files!</p>
<p>Note that on Windows the drag operation will start a blocking modal event loop that will not dispatch any QTimers.</p>
<!-- @@@drag -->
<!-- $$$drag$$$dragDragMode -->
<h3 class="fn"><a name="drag-2"></a><span class="type">bool</span> Q3DragObject::<span class="name">drag</span> ( <span class="type"><a href="q3dragobject.html#DragMode-enum">DragMode</a></span> <i>mode</i> )<tt> [virtual protected]</tt></h3>
<p>This is an overloaded function.</p>
<p>Starts a drag operation using the contents of this object.</p>
<p>At this point, the object becomes owned by Qt, not the application. You should not delete the drag object or anything it references. The actual transfer of data to the target application will be done during future event processing - after that time the drag object will be deleted.</p>
<p>Returns true if the dragged data was dragged as a <i>move</i>, indicating that the caller should remove the original source of the data (the drag object must continue to have a copy); otherwise returns false.</p>
<p>The <i>mode</i> specifies the drag mode (see <a href="q3dragobject.html#DragMode-enum">Q3DragObject::DragMode</a>.) Normally one of the simpler <a href="q3dragobject.html#drag">drag</a>(), <a href="q3dragobject.html#dragMove">dragMove</a>(), or <a href="q3dragobject.html#dragCopy">dragCopy</a>() functions would be used instead.</p>
<!-- @@@drag -->
<!-- $$$dragCopy[overload1]$$$dragCopy -->
<h3 class="fn"><a name="dragCopy"></a><span class="type">void</span> Q3DragObject::<span class="name">dragCopy</span> ()</h3>
<p>Starts a drag operation using the contents of this object, using <tt>DragCopy</tt> mode. Be sure to read the constraints described in <a href="q3dragobject.html#drag">drag</a>().</p>
<p><b>See also </b><a href="q3dragobject.html#drag">drag</a>(), <a href="q3dragobject.html#dragMove">dragMove</a>(), and <a href="q3dragobject.html#dragLink">dragLink</a>().</p>
<!-- @@@dragCopy -->
<!-- $$$dragLink[overload1]$$$dragLink -->
<h3 class="fn"><a name="dragLink"></a><span class="type">void</span> Q3DragObject::<span class="name">dragLink</span> ()</h3>
<p>Starts a drag operation using the contents of this object, using <tt>DragLink</tt> mode. Be sure to read the constraints described in <a href="q3dragobject.html#drag">drag</a>().</p>
<p><b>See also </b><a href="q3dragobject.html#drag">drag</a>(), <a href="q3dragobject.html#dragCopy">dragCopy</a>(), and <a href="q3dragobject.html#dragMove">dragMove</a>().</p>
<!-- @@@dragLink -->
<!-- $$$dragMove[overload1]$$$dragMove -->
<h3 class="fn"><a name="dragMove"></a><span class="type">bool</span> Q3DragObject::<span class="name">dragMove</span> ()</h3>
<p>Starts a drag operation using the contents of this object, using <tt>DragMove</tt> mode. Be sure to read the constraints described in <a href="q3dragobject.html#drag">drag</a>().</p>
<p>Returns true if the data was dragged as a <i>move</i>, indicating that the caller should remove the original source of the data (the drag object must continue to have a copy); otherwise returns false.</p>
<p><b>See also </b><a href="q3dragobject.html#drag">drag</a>(), <a href="q3dragobject.html#dragCopy">dragCopy</a>(), and <a href="q3dragobject.html#dragLink">dragLink</a>().</p>
<!-- @@@dragMove -->
<!-- $$$pixmap[overload1]$$$pixmap -->
<h3 class="fn"><a name="pixmap"></a><span class="type"><a href="qpixmap.html">QPixmap</a></span> Q3DragObject::<span class="name">pixmap</span> () const</h3>
<p>Returns the currently set pixmap, or a null pixmap if none is set.</p>
<p><b>See also </b><a href="q3dragobject.html#setPixmap">setPixmap</a>() and <a href="qpixmap.html#isNull">QPixmap::isNull</a>().</p>
<!-- @@@pixmap -->
<!-- $$$pixmapHotSpot[overload1]$$$pixmapHotSpot -->
<h3 class="fn"><a name="pixmapHotSpot"></a><span class="type"><a href="qpoint.html">QPoint</a></span> Q3DragObject::<span class="name">pixmapHotSpot</span> () const</h3>
<p>Returns the currently set pixmap hotspot.</p>
<p><b>See also </b><a href="q3dragobject.html#setPixmap">setPixmap</a>().</p>
<!-- @@@pixmapHotSpot -->
<!-- $$$setPixmap[overload1]$$$setPixmapQPixmapconstQPoint& -->
<h3 class="fn"><a name="setPixmap"></a><span class="type">void</span> Q3DragObject::<span class="name">setPixmap</span> ( <span class="type"><a href="qpixmap.html">QPixmap</a></span> <i>pm</i>, const <span class="type"><a href="qpoint.html">QPoint</a></span> &amp; <i>hotspot</i> )<tt> [virtual]</tt></h3>
<p>Set the pixmap, <i>pm</i>, to display while dragging the object. The platform-specific implementation will use this where it can - so provide a small masked pixmap, and do not assume that the user will actually see it.</p>
<p>The <i>hotspot</i> is the point on (or off) the pixmap that should be under the cursor as it is dragged. It is relative to the top-left pixel of the pixmap.</p>
<p><b>Warning:</b> We have seen problems with drag cursors on different graphics hardware and driver software on Windows. Setting the graphics acceleration in the display settings down one tick solved the problems in all cases.</p>
<p><b>See also </b><a href="q3dragobject.html#pixmap">pixmap</a>().</p>
<!-- @@@setPixmap -->
<!-- $$$setPixmap$$$setPixmapQPixmap -->
<h3 class="fn"><a name="setPixmap-2"></a><span class="type">void</span> Q3DragObject::<span class="name">setPixmap</span> ( <span class="type"><a href="qpixmap.html">QPixmap</a></span> <i>pm</i> )<tt> [virtual]</tt></h3>
<p>This is an overloaded function.</p>
<p>Uses a hotspot that positions the pixmap below and to the right of the mouse pointer. This allows the user to clearly see the point on the window where they are dragging the data.</p>
<!-- @@@setPixmap -->
<!-- $$$source[overload1]$$$source -->
<h3 class="fn"><a name="source"></a><span class="type"><a href="qwidget.html">QWidget</a></span> * Q3DragObject::<span class="name">source</span> ()</h3>
<p>Returns a pointer to the widget where this object originated (the drag source).</p>
<!-- @@@source -->
<!-- $$$target[overload1]$$$target -->
<h3 class="fn"><a name="target"></a><span class="type"><a href="qwidget.html">QWidget</a></span> * Q3DragObject::<span class="name">target</span> ()<tt> [static]</tt></h3>
<p>After the drag completes, this function will return the <a href="qwidget.html">QWidget</a> which received the drop, or 0 if the data was dropped on another application.</p>
<p>This can be useful for detecting the case where drag and drop is to and from the same widget.</p>
<!-- @@@target -->
</div>
  <div class="ft">
    <span></span>
  </div>
</div> 
<div class="footer">
  <p>
     <acronym title="Copyright">&copy;</acronym> 2008-2011 Nokia Corporation and/or its
     subsidiaries. Nokia, Qt and their respective logos are trademarks of Nokia Corporation 
     in Finland and/or other countries worldwide.</p>
  <p>
     All other trademarks are property of their respective owners. <a title="Privacy Policy"
     href="http://qt.nokia.com/about/privacy-policy">Privacy Policy</a></p>
  <br />
  <p>
    Licensees holding valid Qt Commercial licenses may use this document in accordance with the    Qt Commercial License Agreement provided with the Software or, alternatively, in accordance    with the terms contained in a written agreement between you and Nokia.</p>
  <p>
    Alternatively, this document may be used under the terms of the <a href="http://www.gnu.org/licenses/fdl.html">GNU
    Free Documentation License version 1.3</a>
    as published by the Free Software Foundation.</p>
</div>
</body>
</html>
