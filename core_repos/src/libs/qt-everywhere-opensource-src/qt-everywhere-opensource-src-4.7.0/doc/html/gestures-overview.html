<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- gestures.qdoc -->
  <title>Qt 4.7: Gestures Programming</title>
  <link rel="stylesheet" type="text/css" href="style/style.css" />
  <script src="scripts/jquery.js" type="text/javascript"></script>
  <script src="scripts/functions.js" type="text/javascript"></script>
</head>
<body class="offline narrow creator">
 <div class="header" id="qtdocheader">
    <div class="content"> 
    <div id="nav-logo">
      <a href="index.html">Home</a></div>
    <a href="index.html" class="qtref"><span>Qt Reference Documentation</span></a>
		<div id="narrowsearch"><form onsubmit="return false;" action="" id="qtdocsearch">
		<fieldset>
		<input type="text" value="" id="pageType2" name="searchstring"/>
		 </fieldset>
		</form></div>
    <div id="nav-topright">
      <ul>
        <li class="nav-topright-home"><a href="http://qt.nokia.com/">Qt HOME</a></li>
        <li class="nav-topright-dev"><a href="http://developer.qt.nokia.com/">DEV</a></li>
        <li class="nav-topright-labs"><a href="http://labs.qt.nokia.com/blogs/">LABS</a></li>
        <li class="nav-topright-doc nav-topright-doc-active"><a href="http://doc.qt.nokia.com/">
          DOC</a></li>
        <li class="nav-topright-blog"><a href="http://blog.qt.nokia.com/">BLOG</a></li>
      </ul>
    </div>
    <div id="shortCut">
      <ul>
        <li class="shortCut-topleft-inactive"><span><a href="index.html">Qt 4.7</a></span></li>
        <li class="shortCut-topleft-active"><a href="http://qt.nokia.com/doc/">ALL VERSIONS        </a></li>
      </ul>
     </div>
 <ul class="sf-menu sf-js-enabled sf-shadow" id="narrowmenu"> 
		 <li><a href="#">API Lookup</a> 
			 <ul id="topmenuLook"> 
			   <li><a href="classes.html">Class index</a></li> 
 			  <li><a href="functions.html">Function index</a></li> 
			   <li><a href="modules.html">Modules</a></li> 
			   <li><a href="namespaces.html">Namespaces</a></li> 
			   <li><a href="qtglobal.html">Global stuff</a></li> 
			   <li><a href="qdeclarativeelements.html">QML elements</a></li> 
			   </ul> 
		 </li> 
		 <li><a href="#">Qt Topics</a> 
			 <ul id="topmenuTopic"> 
			   <li><a href="qt-basic-concepts.html">Basic Qt architecture</a></li> 
			   <li><a href="qtquick.html">Device UI's &amp; Qt Quick</a></li> 
			   <li><a href="qt-gui-concepts.html">Desktop UI components</a></li> 
			   <li><a href="platform-specific.html">Platform-specific info</a></li> 
			   <li><a href="best-practices.html">How-To's and Best Practices</a></li> 
			 </ul> 
		</li> 
		 <li><a href="#">Examples</a> 
			 <ul id="topmenuexample"> 
				 <li><a href="all-examples.html">Examples</a></li> 
				 <li><a href="tutorials.html">Tutorials</a></li> 
				 <li><a href="demos.html">Demos</a></li> 
				 <li><a href="qdeclarativeexamples.html">QML Examples</a></li> 
			 </ul> 
		 </li> 
 </ul> 
    </div>
  </div>
  <div class="wrapper">
    <div class="hd">
      <span></span>
    </div>
    <div class="bd group">
      <div class="sidebar">
        <div class="searchlabel">
          Search index:</div>
        <div class="search">
          <form id="qtdocsearch" action="" onsubmit="return false;">
            <fieldset>
              <input type="text" name="searchstring" id="pageType" value="" />
            </fieldset>
          </form>
        </div>
        <div class="box first bottombar" id="lookup">
          <h2 title="API Lookup"><span></span>
            API Lookup</h2>
          <div  id="list001" class="list">
          <ul id="ul001" >
              <li class="defaultLink"><a href="classes.html">Class index</a></li>
              <li class="defaultLink"><a href="functions.html">Function index</a></li>
              <li class="defaultLink"><a href="modules.html">Modules</a></li>
              <li class="defaultLink"><a href="namespaces.html">Namespaces</a></li>
              <li class="defaultLink"><a href="qtglobal.html">Global stuff</a></li>
              <li class="defaultLink"><a href="qdeclarativeelements.html">QML elements</a></li>
            </ul> 
          </div>
        </div>
        <div class="box bottombar" id="topics">
          <h2 title="Qt Topics"><span></span>
            Qt Topics</h2>
          <div id="list002" class="list">
            <ul id="ul002" >
              <li class="defaultLink"><a href="qt-basic-concepts.html">Basic Qt architecture</a></li>
              <li class="defaultLink"><a href="qtquick.html">Device UI's &amp; Qt Quick</a></li>
              <li class="defaultLink"><a href="qt-gui-concepts.html">Desktop UI components</a></li>
              <li class="defaultLink"><a href="platform-specific.html">Platform-specific info</a></li>
            </ul>  
          </div>
        </div>
        <div class="box" id="examples">
          <h2 title="Examples"><span></span>
            Examples</h2>
          <div id="list003" class="list">
        <ul id="ul003">
              <li class="defaultLink"><a href="all-examples.html">Examples</a></li>
              <li class="defaultLink"><a href="tutorials.html">Tutorials</a></li>
              <li class="defaultLink"><a href="demos.html">Demos</a></li>
              <li class="defaultLink"><a href="qdeclarativeexamples.html">QML Examples</a></li>
            </ul> 
          </div>
        </div>
      </div>
      <div class="wrap">
        <div class="toolbar">
          <div class="breadcrumb toolblock">
            <ul>
              <li class="first"><a href="index.html">Home</a></li>
              <!--  Bread crumbs goes here -->
              <li>Gestures Programming</li>            </ul>
          </div>
          <div class="toolbuttons toolblock">
            <ul>
              <li id="smallA" class="t_button">A</li>
              <li id="medA" class="t_button active">A</li>
              <li id="bigA" class="t_button">A</li>
              <li id="print" class="t_button"><a href="javascript:this.print();">
                <span>Print</span></a></li>
            </ul>
          </div>
        </div>
        <div class="content">
  <link rel="start" href="index.html" />
  <link rel="start" href="index.html" />
<div class="toc">
<h3><a name="toc">Contents</a></h3>
<ul>
<li class="level1"><a href="#overview">Overview</a></li>
<li class="level1"><a href="#using-standard-gestures-with-widgets">Using Standard Gestures with Widgets</a></li>
<li class="level1"><a href="#creating-your-own-gesture-recognizer">Creating Your Own Gesture Recognizer</a></li>
<li class="level2"><a href="#filtering-input-events">Filtering Input Events</a></li>
<li class="level2"><a href="#custom-gestures">Custom Gestures</a></li>
<li class="level2"><a href="#resetting-gestures">Resetting Gestures</a></li>
<li class="level1"><a href="#using-a-new-gesture-recognizer">Using a New Gesture Recognizer</a></li>
<li class="level1"><a href="#further-reading">Further Reading</a></li>
</ul>
</div>
<h1 class="title">Gestures Programming</h1>
<span class="subtitle"></span>
<!-- $$$gestures-overview.html-description -->
<div class="descr"> <a name="details"></a>
<p>Qt includes a framework for gesture programming that has the ability to form gestures from a series of events, independently of the input methods used. A gesture could be a particular movement of a mouse, a touch screen action, or a series of events from some other source. The nature of the input, the interpretation of the gesture and the action taken are the choice of the developer.</p>
<a name="overview"></a>
<h2>Overview</h2>
<p><a href="qgesture.html">QGesture</a> is the central class in Qt's gesture framework, providing a container for information about gestures performed by the user. <a href="qgesture.html">QGesture</a> exposes properties that give general information that is common to all gestures, and these can be extended to provide additional gesture-specific information. Common panning, pinching and swiping gestures are represented by specialized classes: <a href="qpangesture.html">QPanGesture</a>, <a href="qpinchgesture.html">QPinchGesture</a> and <a href="qswipegesture.html">QSwipeGesture</a>.</p>
<p>Developers can also implement new gestures by subclassing and extending the <a href="qgesturerecognizer.html">QGestureRecognizer</a> class. Adding support for a new gesture involves implementing code to recognize the gesture from input events. This is described in the <a href="#creating-your-own-gesture-recognizer">Creating Your Own Gesture Recognizer</a> section.</p>
<a name="using-standard-gestures-with-widgets"></a>
<h2>Using Standard Gestures with Widgets</h2>
<p>Gestures can be enabled for instances of <a href="qwidget.html">QWidget</a> and <a href="qgraphicsobject.html">QGraphicsObject</a> subclasses. An object that accepts gesture input is referred to as a <i>target object</i>.</p>
<p>To enable a gesture for a target object, call its <a href="qwidget.html#grabGesture">QWidget::grabGesture</a>() or <a href="qgraphicsobject.html#grabGesture">QGraphicsObject::grabGesture</a>() function with an argument describing the required gesture type. The standard types are defined by the <a href="qt.html#GestureType-enum">Qt::GestureType</a> enum and include many commonly used gestures.</p>
<pre class="highlightedCode brush: cpp">     grabGesture(Qt::PanGesture);
     grabGesture(Qt::PinchGesture);
     grabGesture(Qt::SwipeGesture);</pre>
<p>In the above code, the gesture is set up in the constructor of the target object itself.</p>
<p>When the user performs a gesture, <a href="qgestureevent.html">QGestureEvent</a> events will be delivered to the target object, and these can be handled by reimplementing the <a href="qwidget.html#event">QWidget::event</a>() handler function for widgets or <a href="qgraphicsitem.html#sceneEvent">QGraphicsItem::sceneEvent</a>() for graphics objects.</p>
<p>For convenience, the <a href="gestures-imagegestures.html">Image Gestures Example</a> reimplements the general <a href="qwidget.html#event">event()</a> handler function and delegates gesture events to a specialized gestureEvent() function:</p>
<pre class="highlightedCode brush: cpp"> bool ImageWidget::event(QEvent *event)
 {
     if (event-&gt;type() == QEvent::Gesture)
         return gestureEvent(static_cast&lt;QGestureEvent*&gt;(event));
     return QWidget::event(event);
 }</pre>
<p>The gesture events delivered to the target object can be examined individually and dealt with appropriately:</p>
<pre class="highlightedCode brush: cpp"> bool ImageWidget::gestureEvent(QGestureEvent *event)
 {
     if (QGesture *swipe = event-&gt;gesture(Qt::SwipeGesture))
         swipeTriggered(static_cast&lt;QSwipeGesture *&gt;(swipe));
     else if (QGesture *pan = event-&gt;gesture(Qt::PanGesture))
         panTriggered(static_cast&lt;QPanGesture *&gt;(pan));
     if (QGesture *pinch = event-&gt;gesture(Qt::PinchGesture))
         pinchTriggered(static_cast&lt;QPinchGesture *&gt;(pinch));
     return true;
 }</pre>
<p>Responding to a gesture is simply a matter of obtaining the <a href="qgesture.html">QGesture</a> object delivered in the <a href="qgestureevent.html">QGestureEvent</a> sent to the target object and examining the information it contains.</p>
<pre class="highlightedCode brush: cpp"> void ImageWidget::swipeTriggered(QSwipeGesture *gesture)
 {
     if (gesture-&gt;state() == Qt::GestureFinished) {
         if (gesture-&gt;horizontalDirection() == QSwipeGesture::Left
             || gesture-&gt;verticalDirection() == QSwipeGesture::Up)
             goPrevImage();
         else
             goNextImage();
         update();
     }
 }</pre>
<p>Here, we examine the direction in which the user swiped the widget and modify its contents accordingly.</p>
<a name="creating-your-own-gesture-recognizer"></a>
<h2>Creating Your Own Gesture Recognizer</h2>
<p>Adding support for a new gesture involves creating and registering a new gesture recognizer. Depending on the recognition process for the gesture, it may also involve creating a new gesture object.</p>
<p>To create a new recognizer, you need to subclass <a href="qgesturerecognizer.html">QGestureRecognizer</a> to create a custom recognizer class. There is one virtual function that you must reimplement and two others that can be reimplemented as required.</p>
<a name="filtering-input-events"></a>
<h3>Filtering Input Events</h3>
<p>The <a href="qgesturerecognizer.html#recognize">recognize()</a> function must be reimplemented. This function handles and filters the incoming input events for the target objects and determines whether or not they correspond to the gesture the recognizer is looking for.</p>
<p>Although the logic for gesture recognition is implemented in this function, possibly using a state machine based on the <a href="qt.html#GestureState-enum">Qt::GestureState</a> enums, you can store persistent information about the state of the recognition process in the <a href="qgesture.html">QGesture</a> object supplied.</p>
<p>Your <a href="qgesturerecognizer.html#recognize">recognize()</a> function must return a value of <a href="qgesturerecognizer.html#ResultFlag-enum">QGestureRecognizer::Result</a> that indicates the state of recognition for a given gesture and target object. This determines whether or not a gesture event will be delivered to a target object.</p>
<a name="custom-gestures"></a>
<h3>Custom Gestures</h3>
<p>If you choose to represent a gesture by a custom <a href="qgesture.html">QGesture</a> subclass, you will need to reimplement the <a href="qgesturerecognizer.html#create">create()</a> function to construct instances of your gesture class instead of standard <a href="qgesture.html">QGesture</a> instances. Alternatively, you may want to use standard <a href="qgesture.html">QGesture</a> instances, but add additional dynamic properties to them to express specific details of the gesture you want to handle.</p>
<a name="resetting-gestures"></a>
<h3>Resetting Gestures</h3>
<p>If you use custom gesture objects that need to be reset or otherwise specially handled when a gesture is canceled, you need to reimplement the <a href="qgesturerecognizer.html#reset">reset()</a> function to perform these special tasks.</p>
<p>Note that <a href="qgesture.html">QGesture</a> objects are only created once for each combination of target object and gesture type, and they might be reused every time the user attempts to perform the same gesture type on the target object. As a result, it can be useful to reimplement the <a href="qgesturerecognizer.html#reset">reset()</a> function to clean up after each previous attempt at recognizing a gesture.</p>
<a name="using-a-new-gesture-recognizer"></a>
<h2>Using a New Gesture Recognizer</h2>
<p>To use a gesture recognizer, construct an instance of your <a href="qgesturerecognizer.html">QGestureRecognizer</a> subclass, and register it with the application with <a href="qgesturerecognizer.html#registerRecognizer">QGestureRecognizer::registerRecognizer</a>(). A recognizer for a given type of gesture can be removed with <a href="qgesturerecognizer.html#unregisterRecognizer">QGestureRecognizer::unregisterRecognizer</a>().</p>
<a name="further-reading"></a>
<h2>Further Reading</h2>
<p>The <a href="gestures-imagegestures.html">Image Gestures Example</a> shows how to enable gestures for a widget in a simple image viewer application.</p>
</div>
<!-- @@@gestures-overview.html -->
<p>
</p>
        <!-- /div -->
        <div class="feedback t_button">
          [+] Documentation Feedback</div>
      </div>
    </div>
    <div class="ft">
      <span></span>
    </div>
  </div> 
  <div class="footer">
    <p>
      <acronym title="Copyright">&copy;</acronym> 2008-2010 Nokia Corporation and/or its
      subsidiaries. Nokia, Qt and their respective logos are trademarks of Nokia Corporation 
      in Finland and/or other countries worldwide.</p>
    <p>
      All other trademarks are property of their respective owners. <a title="Privacy Policy"
        href="http://qt.nokia.com/about/privacy-policy">Privacy Policy</a></p>
  </div>
  <div id="feedbackBox">
      <div id="feedcloseX" class="feedclose t_button">X</div>
    <form id="feedform" action="http://doc.qt.nokia.com/docFeedbck/feedback.php" method="get">
      <p id="noteHead">Thank you for giving your feedback. <div class="note">Make sure it is related to this specific page. For more general bugs and 
      requests, please use the <a href="http://bugreports.qt.nokia.com/secure/Dashboard.jspa">Qt Bug Tracker</a>.</div></p>
      <p><textarea id="feedbox" name="feedText" rows="5" cols="40"></textarea></p>
      <p><input id="feedsubmit" class="feedclose" type="submit" name="feedback" /></p>
    </form>
  </div>
  <div id="blurpage">
  </div>
  <!--/div -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-4457116-5']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</body>
</html>
