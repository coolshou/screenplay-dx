<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- wince-customization.qdoc -->
  <title>Qt 4.7: Windows CE - Using shadow builds</title>
  <link rel="stylesheet" type="text/css" href="style/offline.css" />
</head>
<body>
<div class="header" id="qtdocheader">
  <div class="content"> 
    <a href="index.html" class="qtref"><span>Qt Reference Documentation</span></a>
  </div>
  <div class="breadcrumb toolblock">
    <ul>
      <li class="first"><a href="index.html">Home</a></li>
      <!--  Breadcrumbs go here -->
<li>Windows CE - Using shadow builds</li>
    </ul>
  </div>
</div>
<div class="content mainContent">
<h1 class="title">Windows CE - Using shadow builds</h1>
<span class="subtitle"></span>
<!-- $$$shadow builds-wince.html-description -->
<div class="descr"> <a name="details"></a>
<p>While developing for Windows CE you might want to compile a version of Qt for several different platforms and SDKs. In order to create those different builds of Qt you do not have to copy the whole Qt package or the Qt source. You are able to create multiple Qt builds from a single source tree. Such builds are called shadow builds.</p>
<p>Basically a shadow build is created by calling configure.exe from a different directory.</p>
<p>To make sure that the shadow build compiles correctly it is important that you following these guidelines:</p>
<ul>
<li>The original Qt source package must be left untouched - configure must never have been run in the source tree directory.</li>
<li>The shadow build directory must be on the same level as the Qt source package.<br /> If the Qt package is in <tt>C:\Qt\4.7&#x2e;4</tt> the shadow build directory could be <tt>C:\Qt\shadowbuild</tt>. A shadow build from a directory like <tt>C:\shadowbuild</tt> will not compile.</li>
<li>Avoid using &quot;release&quot; and &quot;debug&quot; in the path to the shadow build directory. (This is an internal limitation of the build system.)</li>
<li>The <tt>\bin</tt> directory of the shadow build directory must be added to the <tt>PATH</tt> environment variable.</li>
<li>Perl has been installed on your system. (<a href="http://www.activestate.com/Products/activeperl/index.mhtml">ActivePerl</a> is a popular distribution of Perl on Windows.)</li>
</ul>
<p>So lets assume you have installed Qt in <tt>C:\Qt\4.7&#x2e;4</tt> and you want to create a shadow build in <tt>C:\Qt\mobile5-shadow</tt>:</p>
<ul>
<li>First add <tt>C:\Qt\mobile5-shadow\bin</tt> to the <tt>PATH</tt> variable.<pre class="cpp"> set PATH=C:\Qt\mobile5-shadow\bin;%PATH%</pre>
</li>
<li>Make sure the enviroment variables for your compiler are set.<p>Visual Studio includes <tt>vcvars32.bat</tt> for that purpose - or simply use the &quot;Visual Studio Command Prompt&quot; from the Start menu.</p>
</li>
<li>Now navigate to your shadow build directory and run configure:<pre class="cpp"> cd c:\Qt\mobile5-shadow
 C:\Qt\4.7.4\configure.exe -platform win32-msvc2005 -xplatform wincewm50pocket-msvc2005 -release</pre>
</li>
<li>To build Qt, you have to update your <tt>PATH, INCLUDE</tt> and <tt>LIB</tt> paths to point to your target platforms.<p>For a default installation of the Windows Mobile 5.0 Pocket PC SDK, you can do the following:</p>
<pre class="cpp"> set INCLUDE=C:\Program Files\Microsoft Visual Studio 8\VC\ce\include;
     C:\Program Files\Windows CE Tools\wce500\Windows Mobile 5.0 Pocket PC SDK\Include\Armv4i
 set LIB=C:\Program Files\Microsoft Visual Studio 8\VC\ce\lib\armv4i;
     C:\Program Files\Windows CE Tools\wce500\Windows Mobile 5.0 Pocket PC SDK\Lib\ARMV4I
 set PATH=C:\Program Files\Microsoft Visual Studio 8\VC\ce\bin\x86_arm;
     %PATH%</pre>
<p>We have provided a convenience script for this called <tt>setcepaths</tt>. Simply type:</p>
<pre class="cpp"> setcepaths wincewm50pocket-msvc2005</pre>
</li>
<li>Finally, to build the shadow build type:<pre class="cpp"> nmake</pre>
</li>
<li>That's all. You have successfully created a shadow build of Qt in <tt>C:\Qt\mobile5-shadow</tt>.</li>
</ul>
</div>
<!-- @@@shadow builds-wince.html -->
  <div class="ft">
    <span></span>
  </div>
</div> 
<div class="footer">
  <p>
     <acronym title="Copyright">&copy;</acronym> 2008-2011 Nokia Corporation and/or its
     subsidiaries. Nokia, Qt and their respective logos are trademarks of Nokia Corporation 
     in Finland and/or other countries worldwide.</p>
  <p>
     All other trademarks are property of their respective owners. <a title="Privacy Policy"
     href="http://qt.nokia.com/about/privacy-policy">Privacy Policy</a></p>
  <br />
  <p>
    Licensees holding valid Qt Commercial licenses may use this document in accordance with the    Qt Commercial License Agreement provided with the Software or, alternatively, in accordance    with the terms contained in a written agreement between you and Nokia.</p>
  <p>
    Alternatively, this document may be used under the terms of the <a href="http://www.gnu.org/licenses/fdl.html">GNU
    Free Documentation License version 1.3</a>
    as published by the Free Software Foundation.</p>
</div>
</body>
</html>
