<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- qdeclarativexmllistmodel.cpp -->
  <title>Qt 4.7: QML XmlListModel Element</title>
  <link rel="stylesheet" type="text/css" href="style/style.css" />
  <script src="scripts/jquery.js" type="text/javascript"></script>
  <script src="scripts/functions.js" type="text/javascript"></script>
</head>
<body class="offline narrow creator">
 <div class="header" id="qtdocheader">
    <div class="content"> 
    <div id="nav-logo">
      <a href="index.html">Home</a></div>
    <a href="index.html" class="qtref"><span>Qt Reference Documentation</span></a>
		<div id="narrowsearch"><form onsubmit="return false;" action="" id="qtdocsearch">
		<fieldset>
		<input type="text" value="" id="pageType2" name="searchstring"/>
		 </fieldset>
		</form></div>
    <div id="nav-topright">
      <ul>
        <li class="nav-topright-home"><a href="http://qt.nokia.com/">Qt HOME</a></li>
        <li class="nav-topright-dev"><a href="http://developer.qt.nokia.com/">DEV</a></li>
        <li class="nav-topright-labs"><a href="http://labs.qt.nokia.com/blogs/">LABS</a></li>
        <li class="nav-topright-doc nav-topright-doc-active"><a href="http://doc.qt.nokia.com/">
          DOC</a></li>
        <li class="nav-topright-blog"><a href="http://blog.qt.nokia.com/">BLOG</a></li>
      </ul>
    </div>
    <div id="shortCut">
      <ul>
        <li class="shortCut-topleft-inactive"><span><a href="index.html">Qt 4.7</a></span></li>
        <li class="shortCut-topleft-active"><a href="http://qt.nokia.com/doc/">ALL VERSIONS        </a></li>
      </ul>
     </div>
 <ul class="sf-menu sf-js-enabled sf-shadow" id="narrowmenu"> 
		 <li><a href="#">API Lookup</a> 
			 <ul id="topmenuLook"> 
			   <li><a href="classes.html">Class index</a></li> 
 			  <li><a href="functions.html">Function index</a></li> 
			   <li><a href="modules.html">Modules</a></li> 
			   <li><a href="namespaces.html">Namespaces</a></li> 
			   <li><a href="qtglobal.html">Global stuff</a></li> 
			   <li><a href="qdeclarativeelements.html">QML elements</a></li> 
			   </ul> 
		 </li> 
		 <li><a href="#">Qt Topics</a> 
			 <ul id="topmenuTopic"> 
			   <li><a href="qt-basic-concepts.html">Basic Qt architecture</a></li> 
			   <li><a href="qtquick.html">Device UI's &amp; Qt Quick</a></li> 
			   <li><a href="qt-gui-concepts.html">Desktop UI components</a></li> 
			   <li><a href="platform-specific.html">Platform-specific info</a></li> 
			   <li><a href="best-practices.html">How-To's and Best Practices</a></li> 
			 </ul> 
		</li> 
		 <li><a href="#">Examples</a> 
			 <ul id="topmenuexample"> 
				 <li><a href="all-examples.html">Examples</a></li> 
				 <li><a href="tutorials.html">Tutorials</a></li> 
				 <li><a href="demos.html">Demos</a></li> 
				 <li><a href="qdeclarativeexamples.html">QML Examples</a></li> 
			 </ul> 
		 </li> 
 </ul> 
    </div>
  </div>
  <div class="wrapper">
    <div class="hd">
      <span></span>
    </div>
    <div class="bd group">
      <div class="sidebar">
        <div class="searchlabel">
          Search index:</div>
        <div class="search">
          <form id="qtdocsearch" action="" onsubmit="return false;">
            <fieldset>
              <input type="text" name="searchstring" id="pageType" value="" />
            </fieldset>
          </form>
        </div>
        <div class="box first bottombar" id="lookup">
          <h2 title="API Lookup"><span></span>
            API Lookup</h2>
          <div  id="list001" class="list">
          <ul id="ul001" >
              <li class="defaultLink"><a href="classes.html">Class index</a></li>
              <li class="defaultLink"><a href="functions.html">Function index</a></li>
              <li class="defaultLink"><a href="modules.html">Modules</a></li>
              <li class="defaultLink"><a href="namespaces.html">Namespaces</a></li>
              <li class="defaultLink"><a href="qtglobal.html">Global stuff</a></li>
              <li class="defaultLink"><a href="qdeclarativeelements.html">QML elements</a></li>
            </ul> 
          </div>
        </div>
        <div class="box bottombar" id="topics">
          <h2 title="Qt Topics"><span></span>
            Qt Topics</h2>
          <div id="list002" class="list">
            <ul id="ul002" >
              <li class="defaultLink"><a href="qt-basic-concepts.html">Basic Qt architecture</a></li>
              <li class="defaultLink"><a href="qtquick.html">Device UI's &amp; Qt Quick</a></li>
              <li class="defaultLink"><a href="qt-gui-concepts.html">Desktop UI components</a></li>
              <li class="defaultLink"><a href="platform-specific.html">Platform-specific info</a></li>
            </ul>  
          </div>
        </div>
        <div class="box" id="examples">
          <h2 title="Examples"><span></span>
            Examples</h2>
          <div id="list003" class="list">
        <ul id="ul003">
              <li class="defaultLink"><a href="all-examples.html">Examples</a></li>
              <li class="defaultLink"><a href="tutorials.html">Tutorials</a></li>
              <li class="defaultLink"><a href="demos.html">Demos</a></li>
              <li class="defaultLink"><a href="qdeclarativeexamples.html">QML Examples</a></li>
            </ul> 
          </div>
        </div>
      </div>
      <div class="wrap">
        <div class="toolbar">
          <div class="breadcrumb toolblock">
            <ul>
              <li class="first"><a href="index.html">Home</a></li>
              <!--  Bread crumbs goes here -->
              <li><a href="qdeclarativeelements.html">QML Elements</a></li>              <li>QML XmlListModel Element</li>            </ul>
          </div>
          <div class="toolbuttons toolblock">
            <ul>
              <li id="smallA" class="t_button">A</li>
              <li id="medA" class="t_button active">A</li>
              <li id="bigA" class="t_button">A</li>
              <li id="print" class="t_button"><a href="javascript:this.print();">
                <span>Print</span></a></li>
            </ul>
          </div>
        </div>
        <div class="content">
<div class="toc">
<h3><a name="toc">Contents</a></h3>
<ul>
<li class="level1"><a href="#properties">Properties</a></li>
<li class="level1"><a href="#methods">Methods</a></li>
<li class="level1"><a href="#details">Detailed Description</a></li>
<li class="level2"><a href="#using-key-xml-roles">Using key XML roles</a></li>
</ul>
</div>
<h1 class="title">QML XmlListModel Element</h1>
<span class="subtitle"></span>
<!-- $$$XmlListModel-brief -->
<p>The XmlListModel element is used to specify a model using XPath expressions. <a href="#details">More...</a></p>
<!-- @@@XmlListModel -->
<li><a href="qml-xmllistmodel-members.html">List of all members, including inherited members</a></li>
<a name="properties"></a>
<h2>Properties</h2>
<tr class="odd topAlign"><ul>
<li class="fn"><b><b><a href="qml-xmllistmodel.html#count-prop">count</a></b></b> : int</li>
<li class="fn"><b><b><a href="qml-xmllistmodel.html#namespaceDeclarations-prop">namespaceDeclarations</a></b></b> : string</li>
<li class="fn"><b><b><a href="qml-xmllistmodel.html#progress-prop">progress</a></b></b> : real</li>
<li class="fn"><b><b><a href="qml-xmllistmodel.html#query-prop">query</a></b></b> : string</li>
<li class="fn"><b><b><a href="qml-xmllistmodel.html#roles-prop">roles</a></b></b> : list&lt;XmlRole&gt;</li>
<li class="fn"><b><b><a href="qml-xmllistmodel.html#source-prop">source</a></b></b> : url</li>
<li class="fn"><b><b><a href="qml-xmllistmodel.html#status-prop">status</a></b></b> : enumeration</li>
<li class="fn"><b><b><a href="qml-xmllistmodel.html#xml-prop">xml</a></b></b> : string</li>
</ul>
<a name="methods"></a>
<h2>Methods</h2>
<tr class="even topAlign"><ul>
<li class="fn"><b><b><a href="qml-xmllistmodel.html#errorString-method">errorString</a></b></b></li>
<li class="fn"><b><b><a href="qml-xmllistmodel.html#get-method">get</a></b></b></li>
<li class="fn"><b><b><a href="qml-xmllistmodel.html#reload-method">reload</a></b></b></li>
</ul>
<!-- $$$XmlListModel-description -->
<a name="details"></a>
<h2>Detailed Description</h2>
<p>XmlListModel is used to create a model from XML data. It can be used as a data source for view elements (such as <a href="qml-listview.html">ListView</a>, <a href="qml-pathview.html">PathView</a>, <a href="qml-gridview.html">GridView</a>) and other elements that interact with model data (such as <a href="qml-repeater.html">Repeater</a>).</p>
<p>For example, if there is a XML document at http://www.mysite.com/feed.xml like this:</p>
<pre class="highlightedCode brush: cpp"> &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
 &lt;rss version=&quot;2.0&quot;&gt;
     ...
     &lt;channel&gt;
         &lt;item&gt;
             &lt;title&gt;A blog post&lt;/title&gt;
             &lt;pubDate&gt;Sat, 07 Sep 2010 10:00:01 GMT&lt;/pubDate&gt;
         &lt;/item&gt;
         &lt;item&gt;
             &lt;title&gt;Another blog post&lt;/title&gt;
             &lt;pubDate&gt;Sat, 07 Sep 2010 15:35:01 GMT&lt;/pubDate&gt;
         &lt;/item&gt;
     &lt;/channel&gt;
 &lt;/rss&gt;</pre>
<p>A XmlListModel could create a model from this data, like this:</p>
<pre class="highlightedCode brush: cpp"> import Qt 4.7

 XmlListModel {
     id: xmlModel
     source: &quot;http://www.mysite.com/feed.xml&quot;
     query: &quot;/rss/channel/item&quot;

     XmlRole { name: &quot;title&quot;; query: &quot;title/string()&quot; }
     XmlRole { name: &quot;pubDate&quot;; query: &quot;pubDate/string()&quot; }
 }</pre>
<p>The <a href="qml-xmllistmodel.html#query-prop">query</a> value of &quot;/rss/channel/item&quot; specifies that the XmlListModel should generate a model item for each <tt>&lt;item&gt;</tt> in the XML document.</p>
<p>The <a href="qml-xmlrole.html">XmlRole</a> objects define the model item attributes. Here, each model item will have <tt>title</tt> and <tt>pubDate</tt> attributes that match the <tt>title</tt> and <tt>pubDate</tt> values of its corresponding <tt>&lt;item&gt;</tt>. (See <a href="qml-xmlrole.html#query-prop">XmlRole::query</a> for more examples of valid XPath expressions for <a href="qml-xmlrole.html">XmlRole</a>.)</p>
<p>The model could be used in a <a href="qml-listview.html">ListView</a>, like this:</p>
<pre class="highlightedCode brush: cpp"> ListView {
     width: 180; height: 300
     model: xmlModel
     delegate: Text { text: title + &quot;: &quot; + pubDate }
 }</pre>
<p class="centerAlign"><img src="images/qml-xmllistmodel-example.png" /></p><p>The XmlListModel data is loaded asynchronously, and <a href="qml-xmllistmodel.html#status-prop">status</a> is set to <tt>XmlListModel.Ready</tt> when loading is complete. Note this means when XmlListModel is used for a view, the view is not populated until the model is loaded.</p>
<a name="using-key-xml-roles"></a>
<h2>Using key XML roles</h2>
<p>You can define certain roles as &quot;keys&quot; so that when <a href="qml-xmllistmodel.html#reload-method">reload</a>() is called, the model will only add and refresh data that contains new values for these keys.</p>
<p>For example, if above role for &quot;pubDate&quot; was defined like this instead:</p>
<pre class="highlightedCode brush: cpp">     XmlRole { name: &quot;pubDate&quot;; query: &quot;pubDate/string()&quot;; isKey: true }</pre>
<p>Then when <a href="qml-xmllistmodel.html#reload-method">reload</a>() is called, the model will only add and reload items with a &quot;pubDate&quot; value that is not already present in the model.</p>
<p>This is useful when displaying the contents of XML documents that are incrementally updated (such as RSS feeds) to avoid repainting the entire contents of a model in a view.</p>
<p>If multiple key roles are specified, the model only adds and reload items with a combined value of all key roles that is not already present in the model.</p>
<p>See also <a href="demos-declarative-rssnews.html">RSS News</a>.</p>
<!-- @@@XmlListModel -->
<h2>Property Documentation</h2>
<!-- $$$count -->
<div class="qmlitem"><div class="qmlproto"><table class="qmlname"><tr class="odd"><td class="tblQmlPropNode"><p><a name="count-prop"></a><span class="qmlreadonly">read-only</span>count : <a href="qml-int.html">int</a></td></tr></table></div><div class="qmldoc"><p>The number of data entries in the model.</p>
</div></div><!-- @@@count -->
<br/>
<!-- $$$namespaceDeclarations -->
<div class="qmlitem"><div class="qmlproto"><table class="qmlname"><tr class="odd"><td class="tblQmlPropNode"><p><a name="namespaceDeclarations-prop"></a>namespaceDeclarations : <a href="qml-string.html">string</a></td></tr></table></div><div class="qmldoc"><p>The namespace declarations to be used in the XPath queries.</p>
<p>The namespaces should be declared as in XQuery. For example, if a requested document at http://mysite.com/feed.xml uses the namespace &quot;http://www.w3.org/2005/Atom&quot;, this can be declared as the default namespace:</p>
<pre class="highlightedCode brush: cpp"> XmlListModel {
     source: &quot;http://mysite.com/feed.xml&quot;
     query: &quot;/feed/entry&quot;
     namespaceDeclarations: &quot;declare default element namespace 'http://www.w3.org/2005/Atom';&quot;

     XmlRole { name: &quot;title&quot;; query: &quot;title/string()&quot; }
 }</pre>
</div></div><!-- @@@namespaceDeclarations -->
<br/>
<!-- $$$progress -->
<div class="qmlitem"><div class="qmlproto"><table class="qmlname"><tr class="odd"><td class="tblQmlPropNode"><p><a name="progress-prop"></a><span class="qmlreadonly">read-only</span>progress : <a href="qml-real.html">real</a></td></tr></table></div><div class="qmldoc"><p>This indicates the current progress of the downloading of the XML data source. This value ranges from 0.0 (no data downloaded) to 1.0 (all data downloaded). If the XML data is not from a remote source, the progress becomes 1.0 as soon as the data is read.</p>
<p>Note that when the progress is 1.0, the XML data has been downloaded, but it is yet to be loaded into the model at this point. Use the status property to find out when the XML data has been read and loaded into the model.</p>
<p>See also <a href="qml-xmllistmodel.html#status-prop">status</a> and <a href="qml-xmllistmodel.html#source-prop">source</a>.</p>
</div></div><!-- @@@progress -->
<br/>
<!-- $$$query -->
<div class="qmlitem"><div class="qmlproto"><table class="qmlname"><tr class="odd"><td class="tblQmlPropNode"><p><a name="query-prop"></a>query : <a href="qml-string.html">string</a></td></tr></table></div><div class="qmldoc"><p>An absolute XPath query representing the base query for creating model items from this model's <a href="qml-xmlrole.html">XmlRole</a> objects. The query should start with '/' or '//'.</p>
</div></div><!-- @@@query -->
<br/>
<!-- $$$roles -->
<div class="qmlitem"><div class="qmlproto"><table class="qmlname"><tr class="odd"><td class="tblQmlPropNode"><p><a name="roles-prop"></a><span class="qmlreadonly">read-only</span>roles : <a href="qml-list.html">list</a>&lt;<a href="qml-xmlrole.html">XmlRole</a>&gt;</td></tr></table></div><div class="qmldoc"><p>The roles to make available for this model.</p>
</div></div><!-- @@@roles -->
<br/>
<!-- $$$source -->
<div class="qmlitem"><div class="qmlproto"><table class="qmlname"><tr class="odd"><td class="tblQmlPropNode"><p><a name="source-prop"></a>source : <a href="qml-url.html">url</a></td></tr></table></div><div class="qmldoc"><p>The location of the XML data source.</p>
<p>If both <tt>source</tt> and <a href="qml-xmllistmodel.html#xml-prop">xml</a> are set, <a href="qml-xmllistmodel.html#xml-prop">xml</a> is used.</p>
</div></div><!-- @@@source -->
<br/>
<!-- $$$status -->
<div class="qmlitem"><div class="qmlproto"><table class="qmlname"><tr class="odd"><td class="tblQmlPropNode"><p><a name="status-prop"></a><span class="qmlreadonly">read-only</span>status : <a href="qml-enumeration.html">enumeration</a></td></tr></table></div><div class="qmldoc"><p>Specifies the model loading status, which can be one of the following:</p>
<ul>
<li><a href="qml-xmllistmodel.html">XmlListModel</a>.Null - No XML data has been set for this model.</li>
<li><a href="qml-xmllistmodel.html">XmlListModel</a>.Ready - The XML data has been loaded into the model.</li>
<li><a href="qml-xmllistmodel.html">XmlListModel</a>.Loading - The model is in the process of reading and loading XML data.</li>
<li><a href="qml-xmllistmodel.html">XmlListModel</a>.Error - An error occurred while the model was loading. See <a href="qml-xmllistmodel.html#errorString-method">errorString</a>() for details about the error.</li>
</ul>
<p>See also <a href="qml-xmllistmodel.html#progress-prop">progress</a>.</p>
</div></div><!-- @@@status -->
<br/>
<!-- $$$xml -->
<div class="qmlitem"><div class="qmlproto"><table class="qmlname"><tr class="odd"><td class="tblQmlPropNode"><p><a name="xml-prop"></a>xml : <a href="qml-string.html">string</a></td></tr></table></div><div class="qmldoc"><p>This property holds the XML data for this model, if set.</p>
<p>The text is assumed to be UTF-8 encoded.</p>
<p>If both <a href="qml-xmllistmodel.html#source-prop">source</a> and <tt>xml</tt> are set, <tt>xml</tt> is used.</p>
</div></div><!-- @@@xml -->
<br/>
<h2>Method Documentation</h2>
<!-- $$$errorString -->
<div class="qmlitem"><div class="qmlproto"><table class="qmlname"><tr class="odd"><td class="tblQmlFuncNode"><p><a name="errorString-method"></a>void XmlListModel::errorString ()</p></td></tr></table></div><div class="qmldoc"><p>Returns a string description of the last error that occurred if <a href="qml-xmllistmodel.html#status-prop">status</a> is XmlListModel::Error.</p>
</div></div><!-- @@@errorString -->
<br/>
<!-- $$$get -->
<div class="qmlitem"><div class="qmlproto"><table class="qmlname"><tr class="odd"><td class="tblQmlFuncNode"><p><a name="get-method"></a>object XmlListModel::get ( <a href="qml-int.html">int</a> <i>index</i> )</p></td></tr></table></div><div class="qmldoc"><p>Returns the item at <i>index</i> in the model.</p>
<p>For example, for a model like this:</p>
<pre class="highlightedCode brush: cpp"> XmlListModel {
     id: model
     source: &quot;http://mysite.com/feed.xml&quot;
     query: &quot;/feed/entry&quot;
     XmlRole { name: &quot;title&quot;; query: &quot;title/string()&quot; }
 }</pre>
<p>This will access the <tt>title</tt> value for the first item in the model:</p>
<pre class="highlightedCode brush: cpp">     var title = model.get(0).title;</pre>
</div></div><!-- @@@get -->
<br/>
<!-- $$$reload -->
<div class="qmlitem"><div class="qmlproto"><table class="qmlname"><tr class="odd"><td class="tblQmlFuncNode"><p><a name="reload-method"></a>XmlListModel::reload ()</p></td></tr></table></div><div class="qmldoc"><p>Reloads the model.</p>
<p>If no key roles have been specified, all existing model data is removed, and the model is rebuilt from scratch.</p>
<p>Otherwise, items are only added if the model does not already contain items with matching key role values.</p>
<p>See also <a href="qml-xmllistmodel.html#using-key-xml-roles">Using key XML roles</a> and <a href="qml-xmlrole.html#isKey-prop">XmlRole::isKey</a>.</p>
</div></div><!-- @@@reload -->
<br/>
        <!-- /div -->
        <div class="feedback t_button">
          [+] Documentation Feedback</div>
      </div>
    </div>
    <div class="ft">
      <span></span>
    </div>
  </div> 
  <div class="footer">
    <p>
      <acronym title="Copyright">&copy;</acronym> 2008-2010 Nokia Corporation and/or its
      subsidiaries. Nokia, Qt and their respective logos are trademarks of Nokia Corporation 
      in Finland and/or other countries worldwide.</p>
    <p>
      All other trademarks are property of their respective owners. <a title="Privacy Policy"
        href="http://qt.nokia.com/about/privacy-policy">Privacy Policy</a></p>
  </div>
  <div id="feedbackBox">
      <div id="feedcloseX" class="feedclose t_button">X</div>
    <form id="feedform" action="http://doc.qt.nokia.com/docFeedbck/feedback.php" method="get">
      <p id="noteHead">Thank you for giving your feedback. <div class="note">Make sure it is related to this specific page. For more general bugs and 
      requests, please use the <a href="http://bugreports.qt.nokia.com/secure/Dashboard.jspa">Qt Bug Tracker</a>.</div></p>
      <p><textarea id="feedbox" name="feedText" rows="5" cols="40"></textarea></p>
      <p><input id="feedsubmit" class="feedclose" type="submit" name="feedback" /></p>
    </form>
  </div>
  <div id="blurpage">
  </div>
  <!--/div -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-4457116-5']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</body>
</html>
