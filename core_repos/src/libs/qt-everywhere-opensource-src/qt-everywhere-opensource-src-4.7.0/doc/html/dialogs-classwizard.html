<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- classwizard.qdoc -->
  <title>Qt 4.7: Class Wizard Example</title>
  <link rel="stylesheet" type="text/css" href="style/style.css" />
  <script src="scripts/jquery.js" type="text/javascript"></script>
  <script src="scripts/functions.js" type="text/javascript"></script>
</head>
<body class="offline narrow creator">
 <div class="header" id="qtdocheader">
    <div class="content"> 
    <div id="nav-logo">
      <a href="index.html">Home</a></div>
    <a href="index.html" class="qtref"><span>Qt Reference Documentation</span></a>
		<div id="narrowsearch"><form onsubmit="return false;" action="" id="qtdocsearch">
		<fieldset>
		<input type="text" value="" id="pageType2" name="searchstring"/>
		 </fieldset>
		</form></div>
    <div id="nav-topright">
      <ul>
        <li class="nav-topright-home"><a href="http://qt.nokia.com/">Qt HOME</a></li>
        <li class="nav-topright-dev"><a href="http://developer.qt.nokia.com/">DEV</a></li>
        <li class="nav-topright-labs"><a href="http://labs.qt.nokia.com/blogs/">LABS</a></li>
        <li class="nav-topright-doc nav-topright-doc-active"><a href="http://doc.qt.nokia.com/">
          DOC</a></li>
        <li class="nav-topright-blog"><a href="http://blog.qt.nokia.com/">BLOG</a></li>
      </ul>
    </div>
    <div id="shortCut">
      <ul>
        <li class="shortCut-topleft-inactive"><span><a href="index.html">Qt 4.7</a></span></li>
        <li class="shortCut-topleft-active"><a href="http://qt.nokia.com/doc/">ALL VERSIONS        </a></li>
      </ul>
     </div>
 <ul class="sf-menu sf-js-enabled sf-shadow" id="narrowmenu"> 
		 <li><a href="#">API Lookup</a> 
			 <ul id="topmenuLook"> 
			   <li><a href="classes.html">Class index</a></li> 
 			  <li><a href="functions.html">Function index</a></li> 
			   <li><a href="modules.html">Modules</a></li> 
			   <li><a href="namespaces.html">Namespaces</a></li> 
			   <li><a href="qtglobal.html">Global stuff</a></li> 
			   <li><a href="qdeclarativeelements.html">QML elements</a></li> 
			   </ul> 
		 </li> 
		 <li><a href="#">Qt Topics</a> 
			 <ul id="topmenuTopic"> 
			   <li><a href="qt-basic-concepts.html">Basic Qt architecture</a></li> 
			   <li><a href="qtquick.html">Device UI's &amp; Qt Quick</a></li> 
			   <li><a href="qt-gui-concepts.html">Desktop UI components</a></li> 
			   <li><a href="platform-specific.html">Platform-specific info</a></li> 
			   <li><a href="best-practices.html">How-To's and Best Practices</a></li> 
			 </ul> 
		</li> 
		 <li><a href="#">Examples</a> 
			 <ul id="topmenuexample"> 
				 <li><a href="all-examples.html">Examples</a></li> 
				 <li><a href="tutorials.html">Tutorials</a></li> 
				 <li><a href="demos.html">Demos</a></li> 
				 <li><a href="qdeclarativeexamples.html">QML Examples</a></li> 
			 </ul> 
		 </li> 
 </ul> 
    </div>
  </div>
  <div class="wrapper">
    <div class="hd">
      <span></span>
    </div>
    <div class="bd group">
      <div class="sidebar">
        <div class="searchlabel">
          Search index:</div>
        <div class="search">
          <form id="qtdocsearch" action="" onsubmit="return false;">
            <fieldset>
              <input type="text" name="searchstring" id="pageType" value="" />
            </fieldset>
          </form>
        </div>
        <div class="box first bottombar" id="lookup">
          <h2 title="API Lookup"><span></span>
            API Lookup</h2>
          <div  id="list001" class="list">
          <ul id="ul001" >
              <li class="defaultLink"><a href="classes.html">Class index</a></li>
              <li class="defaultLink"><a href="functions.html">Function index</a></li>
              <li class="defaultLink"><a href="modules.html">Modules</a></li>
              <li class="defaultLink"><a href="namespaces.html">Namespaces</a></li>
              <li class="defaultLink"><a href="qtglobal.html">Global stuff</a></li>
              <li class="defaultLink"><a href="qdeclarativeelements.html">QML elements</a></li>
            </ul> 
          </div>
        </div>
        <div class="box bottombar" id="topics">
          <h2 title="Qt Topics"><span></span>
            Qt Topics</h2>
          <div id="list002" class="list">
            <ul id="ul002" >
              <li class="defaultLink"><a href="qt-basic-concepts.html">Basic Qt architecture</a></li>
              <li class="defaultLink"><a href="qtquick.html">Device UI's &amp; Qt Quick</a></li>
              <li class="defaultLink"><a href="qt-gui-concepts.html">Desktop UI components</a></li>
              <li class="defaultLink"><a href="platform-specific.html">Platform-specific info</a></li>
            </ul>  
          </div>
        </div>
        <div class="box" id="examples">
          <h2 title="Examples"><span></span>
            Examples</h2>
          <div id="list003" class="list">
        <ul id="ul003">
              <li class="defaultLink"><a href="all-examples.html">Examples</a></li>
              <li class="defaultLink"><a href="tutorials.html">Tutorials</a></li>
              <li class="defaultLink"><a href="demos.html">Demos</a></li>
              <li class="defaultLink"><a href="qdeclarativeexamples.html">QML Examples</a></li>
            </ul> 
          </div>
        </div>
      </div>
      <div class="wrap">
        <div class="toolbar">
          <div class="breadcrumb toolblock">
            <ul>
              <li class="first"><a href="index.html">Home</a></li>
              <!--  Bread crumbs goes here -->
              <li><a href="all-examples.html">Examples</a></li>              <li><a href="examples-dialogs.html">Dialog Examples</a></li>              <li>Class Wizard Example</li>            </ul>
          </div>
          <div class="toolbuttons toolblock">
            <ul>
              <li id="smallA" class="t_button">A</li>
              <li id="medA" class="t_button active">A</li>
              <li id="bigA" class="t_button">A</li>
              <li id="print" class="t_button"><a href="javascript:this.print();">
                <span>Print</span></a></li>
            </ul>
          </div>
        </div>
        <div class="content">
<div class="toc">
<h3><a name="toc">Contents</a></h3>
<ul>
<li class="level1"><a href="#classwizard-class-definition">ClassWizard Class Definition</a></li>
<li class="level1"><a href="#the-classwizard-class">The ClassWizard Class</a></li>
<li class="level1"><a href="#the-intropage-class">The IntroPage Class</a></li>
<li class="level1"><a href="#the-classinfopage-class">The ClassInfoPage Class</a></li>
<li class="level1"><a href="#the-codestylepage-class">The CodeStylePage Class</a></li>
</ul>
</div>
<h1 class="title">Class Wizard Example</h1>
<span class="subtitle"></span>
<!-- $$$dialogs/classwizard-description -->
<div class="descr"> <a name="details"></a>
<p>Files:</p>
<ul>
<li><a href="dialogs-classwizard-classwizard-cpp.html">dialogs/classwizard/classwizard.cpp</a></li>
<li><a href="dialogs-classwizard-classwizard-h.html">dialogs/classwizard/classwizard.h</a></li>
<li><a href="dialogs-classwizard-main-cpp.html">dialogs/classwizard/main.cpp</a></li>
<li><a href="dialogs-classwizard-classwizard-pro.html">dialogs/classwizard/classwizard.pro</a></li>
<li><a href="dialogs-classwizard-classwizard-qrc.html">dialogs/classwizard/classwizard.qrc</a></li>
</ul>
<p>Images:</p>
<ul>
<li><a href="images/used-in-examples/dialogs/classwizard/images/background.png">dialogs/classwizard/images/background.png</a></li>
<li><a href="images/used-in-examples/dialogs/classwizard/images/banner.png">dialogs/classwizard/images/banner.png</a></li>
<li><a href="images/used-in-examples/dialogs/classwizard/images/logo1.png">dialogs/classwizard/images/logo1.png</a></li>
<li><a href="images/used-in-examples/dialogs/classwizard/images/logo2.png">dialogs/classwizard/images/logo2.png</a></li>
<li><a href="images/used-in-examples/dialogs/classwizard/images/logo3.png">dialogs/classwizard/images/logo3.png</a></li>
<li><a href="images/used-in-examples/dialogs/classwizard/images/watermark1.png">dialogs/classwizard/images/watermark1.png</a></li>
<li><a href="images/used-in-examples/dialogs/classwizard/images/watermark2.png">dialogs/classwizard/images/watermark2.png</a></li>
</ul>
<p>The License Wizard example shows how to implement linear wizards using <a href="qwizard.html">QWizard</a>.</p>
<p class="centerAlign"><img src="images/classwizard.png" alt="Screenshot of the Class Wizard example" /></p><p>Most wizards have a linear structure, with page 1 followed by page 2 and so on until the last page. Some wizards are more complex in that they allow different traversal paths based on the information provided by the user. The <a href="dialogs-licensewizard.html">License Wizard</a> example shows how to create such wizards.</p>
<p>The Class Wizard example consists of the following classes:</p>
<ul>
<li><tt>ClassWizard</tt> inherits <a href="qwizard.html">QWizard</a> and provides a three-step wizard that generates the skeleton of a C++ class based on the user's input.</li>
<li><tt>IntroPage</tt>, <tt>ClassInfoPage</tt>, <tt>CodeStylePage</tt>, <tt>OutputFilesPage</tt>, and <tt>ConclusionPage</tt> are <a href="qwizardpage.html">QWizardPage</a> subclasses that implement the wizard pages.</li>
</ul>
<a name="classwizard-class-definition"></a>
<h2>ClassWizard Class Definition</h2>
<p class="centerAlign"><img src="images/classwizard-flow.png" alt="The Class Wizard pages" /></p><p>We will see how to subclass <a href="qwizard.html">QWizard</a> to implement our own wizard. The concrete wizard class is called <tt>ClassWizard</tt> and provides five pages:</p>
<ul>
<li>The first page is an introduction page, telling the user what the wizard is going to do.</li>
<li>The second page asks for a class name and a base class, and allows the user to specify whether the class should have a <tt>Q_OBJECT</tt> macro and what constructors it should provide.</li>
<li>The third page allows the user to set some options related to the code style, such as the macro used to protect the header file from multiple inclusion (e.g&#x2e;, <tt>MYDIALOG_H</tt>).</li>
<li>The fourth page allows the user to specify the names of the output files.</li>
<li>The fifth page is a conclusion page.</li>
</ul>
<p>Although the program is just an example, if you press <b>Finish</b> (<b>Done</b> on Mac OS X), actual C++ source files will actually be generated.</p>
<a name="the-classwizard-class"></a>
<h2>The ClassWizard Class</h2>
<p>Here's the <tt>ClassWizard</tt> definition:</p>
<pre class="highlightedCode brush: cpp"> class ClassWizard : public QWizard
 {
     Q_OBJECT

 public:
     ClassWizard(QWidget *parent = 0);

     void accept();
 };</pre>
<p>The class reimplements <a href="qdialog.html">QDialog</a>'s <a href="qdialog.html#accept">accept()</a> slot. This slot is called when the user clicks <b>Finish</b>.</p>
<p>Here's the constructor:</p>
<pre class="highlightedCode brush: cpp"> ClassWizard::ClassWizard(QWidget *parent)
     : QWizard(parent)
 {
     addPage(new IntroPage);
     addPage(new ClassInfoPage);
     addPage(new CodeStylePage);
     addPage(new OutputFilesPage);
     addPage(new ConclusionPage);

     setPixmap(QWizard::BannerPixmap, QPixmap(&quot;:/images/banner.png&quot;));
     setPixmap(QWizard::BackgroundPixmap, QPixmap(&quot;:/images/background.png&quot;));

     setWindowTitle(tr(&quot;Class Wizard&quot;));
 }</pre>
<p>We instantiate the five pages and insert them into the wizard using <a href="qwizard.html#addPage">QWizard::addPage</a>(). The order in which they are inserted is also the order in which they will be shown later on.</p>
<p>We call <a href="qwizard.html#setPixmap">QWizard::setPixmap</a>() to set the banner and the background pixmaps for all pages. The banner is used as a background for the page header when the wizard's style is <a href="qwizard.html#WizardStyle-enum">ModernStyle</a>; the background is used as the dialog's background in <a href="qwizard.html#WizardStyle-enum">MacStyle</a>. (See <a href="qwizard.html#elements-of-a-wizard-page">Elements of a Wizard Page</a> for more information.)</p>
<pre class="highlightedCode brush: cpp"> void ClassWizard::accept()
 {
     QByteArray className = field(&quot;className&quot;).toByteArray();
     QByteArray baseClass = field(&quot;baseClass&quot;).toByteArray();
     QByteArray macroName = field(&quot;macroName&quot;).toByteArray();
     QByteArray baseInclude = field(&quot;baseInclude&quot;).toByteArray();

     QString outputDir = field(&quot;outputDir&quot;).toString();
     QString header = field(&quot;header&quot;).toString();
     QString implementation = field(&quot;implementation&quot;).toString();
     ...
     QDialog::accept();
 }</pre>
<p>If the user clicks <b>Finish</b>, we extract the information from the various pages using <a href="qwizard.html#field">QWizard::field</a>() and generate the files. The code is long and tedious (and has barely anything to do with noble art of designing wizards), so most of it is skipped here. See the actual example in the Qt distribution for the details if you're curious.</p>
<a name="the-intropage-class"></a>
<h2>The IntroPage Class</h2>
<p>The pages are defined in <tt>classwizard.h</tt> and implemented in <tt>classwizard.cpp</tt>, together with <tt>ClassWizard</tt>. We will start with the easiest page:</p>
<pre class="highlightedCode brush: cpp"> class IntroPage : public QWizardPage
 {
     Q_OBJECT

 public:
     IntroPage(QWidget *parent = 0);

 private:
     QLabel *label;
 };

 IntroPage::IntroPage(QWidget *parent)
     : QWizardPage(parent)
 {
     setTitle(tr(&quot;Introduction&quot;));
     setPixmap(QWizard::WatermarkPixmap, QPixmap(&quot;:/images/watermark1.png&quot;));

     label = new QLabel(tr(&quot;This wizard will generate a skeleton C++ class &quot;
                           &quot;definition, including a few functions. You simply &quot;
                           &quot;need to specify the class name and set a few &quot;
                           &quot;options to produce a header file and an &quot;
                           &quot;implementation file for your new C++ class.&quot;));
     label-&gt;setWordWrap(true);

     QVBoxLayout *layout = new QVBoxLayout;
     layout-&gt;addWidget(label);
     setLayout(layout);
 }</pre>
<p>A page inherits from <a href="qwizardpage.html">QWizardPage</a>. We set a <a href="qwizardpage.html#title-prop">title</a> and a <a href="qwizard.html#WizardPixmap-enum">watermark pixmap</a>. By not setting any <a href="qwizardpage.html#subTitle-prop">subTitle</a>, we ensure that no header is displayed for this page. (On Windows, it is customary for wizards to display a watermark pixmap on the first and last pages, and to have a header on the other pages.)</p>
<p>Then we create a <a href="qlabel.html">QLabel</a> and add it to a layout.</p>
<a name="the-classinfopage-class"></a>
<h2>The ClassInfoPage Class</h2>
<p>The second page is defined and implemented as follows:</p>
<pre class="highlightedCode brush: cpp"> class ClassInfoPage : public QWizardPage
 {
     Q_OBJECT

 public:
     ClassInfoPage(QWidget *parent = 0);

 private:
     QLabel *classNameLabel;
     QLabel *baseClassLabel;
     QLineEdit *classNameLineEdit;
     QLineEdit *baseClassLineEdit;
     QCheckBox *qobjectMacroCheckBox;
     QGroupBox *groupBox;
     QRadioButton *qobjectCtorRadioButton;
     QRadioButton *qwidgetCtorRadioButton;
     QRadioButton *defaultCtorRadioButton;
     QCheckBox *copyCtorCheckBox;
 };

 ClassInfoPage::ClassInfoPage(QWidget *parent)
     : QWizardPage(parent)
 {
     setTitle(tr(&quot;Class Information&quot;));
     setSubTitle(tr(&quot;Specify basic information about the class for which you &quot;
                    &quot;want to generate skeleton source code files.&quot;));
     setPixmap(QWizard::LogoPixmap, QPixmap(&quot;:/images/logo1.png&quot;));

     classNameLabel = new QLabel(tr(&quot;&amp;Class name:&quot;));
     classNameLineEdit = new QLineEdit;
     classNameLabel-&gt;setBuddy(classNameLineEdit);

     baseClassLabel = new QLabel(tr(&quot;B&amp;ase class:&quot;));
     baseClassLineEdit = new QLineEdit;
     baseClassLabel-&gt;setBuddy(baseClassLineEdit);

     qobjectMacroCheckBox = new QCheckBox(tr(&quot;Generate Q_OBJECT &amp;macro&quot;));

     groupBox = new QGroupBox(tr(&quot;C&amp;onstructor&quot;));
     ...
     registerField(&quot;className*&quot;, classNameLineEdit);
     registerField(&quot;baseClass&quot;, baseClassLineEdit);
     registerField(&quot;qobjectMacro&quot;, qobjectMacroCheckBox);
     registerField(&quot;qobjectCtor&quot;, qobjectCtorRadioButton);
     registerField(&quot;qwidgetCtor&quot;, qwidgetCtorRadioButton);
     registerField(&quot;defaultCtor&quot;, defaultCtorRadioButton);
     registerField(&quot;copyCtor&quot;, copyCtorCheckBox);

     QVBoxLayout *groupBoxLayout = new QVBoxLayout;
     ...
 }</pre>
<p>First, we set the page's <a href="qwizardpage.html#title-prop">title</a>, <a href="qwizardpage.html#subTitle-prop">subTitle</a>, and <a href="qwizard.html#WizardPixmap-enum">logo pixmap</a>. The logo pixmap is displayed in the page's header in <a href="qwizard.html#WizardStyle-enum">ClassicStyle</a> and <a href="qwizard.html#WizardStyle-enum">ModernStyle</a>.</p>
<p>Then we create the child widgets, create <a href="qwizard.html#registering-and-using-fields">wizard fields</a> associated with them, and put them into layouts. The <tt>className</tt> field is created with an asterisk (<tt>*</tt>) next to its name. This makes it a <a href="qwizard.html#mandatory-fields">mandatory field</a>, that is, a field that must be filled before the user can press the <b>Next</b> button (<b>Continue</b> on Mac OS X). The fields' values can be accessed from any other page using <a href="qwizardpage.html#field">QWizardPage::field</a>(), or from the wizard code using <a href="qwizard.html#field">QWizard::field</a>().</p>
<a name="the-codestylepage-class"></a>
<h2>The CodeStylePage Class</h2>
<p>The third page is defined and implemented as follows:</p>
<pre class="highlightedCode brush: cpp"> class CodeStylePage : public QWizardPage
 {
     Q_OBJECT

 public:
     CodeStylePage(QWidget *parent = 0);

 protected:
     void initializePage();

 private:
     QCheckBox *commentCheckBox;
     QCheckBox *protectCheckBox;
     QCheckBox *includeBaseCheckBox;
     QLabel *macroNameLabel;
     QLabel *baseIncludeLabel;
     QLineEdit *macroNameLineEdit;
     QLineEdit *baseIncludeLineEdit;
 };

 CodeStylePage::CodeStylePage(QWidget *parent)
     : QWizardPage(parent)
 {
     setTitle(tr(&quot;Code Style Options&quot;));
     setSubTitle(tr(&quot;Choose the formatting of the generated code.&quot;));
     setPixmap(QWizard::LogoPixmap, QPixmap(&quot;:/images/logo2.png&quot;));

     commentCheckBox = new QCheckBox(tr(&quot;&amp;Start generated files with a &quot;
     ...
     setLayout(layout);
 }

 void CodeStylePage::initializePage()
 {
     QString className = field(&quot;className&quot;).toString();
     macroNameLineEdit-&gt;setText(className.toUpper() + &quot;_H&quot;);

     QString baseClass = field(&quot;baseClass&quot;).toString();

     includeBaseCheckBox-&gt;setChecked(!baseClass.isEmpty());
     includeBaseCheckBox-&gt;setEnabled(!baseClass.isEmpty());
     baseIncludeLabel-&gt;setEnabled(!baseClass.isEmpty());
     baseIncludeLineEdit-&gt;setEnabled(!baseClass.isEmpty());

     if (baseClass.isEmpty()) {
         baseIncludeLineEdit-&gt;clear();
     } else if (QRegExp(&quot;Q[A-Z].*&quot;).exactMatch(baseClass)) {
         baseIncludeLineEdit-&gt;setText(&quot;&lt;&quot; + baseClass + &quot;&gt;&quot;);
     } else {
         baseIncludeLineEdit-&gt;setText(&quot;\&quot;&quot; + baseClass.toLower() + &quot;.h\&quot;&quot;);
     }
 }</pre>
<p>The code in the constructor is very similar to what we did for <tt>ClassInfoPage</tt>, so we skipped most of it.</p>
<p>The <tt>initializePage()</tt> function is what makes this class interesting. It is reimplemented from <a href="qwizardpage.html">QWizardPage</a> and is used to initialize some of the page's fields with values from the previous page (namely, <tt>className</tt> and <tt>baseClass</tt>). For example, if the class name on page 2 is <tt>SuperDuperWidget</tt>, the default macro name on page 3 is <tt>SUPERDUPERWIDGET_H</tt>.</p>
<p>The <tt>OutputFilesPage</tt> and <tt>ConclusionPage</tt> classes are very similar to <tt>CodeStylePage</tt>, so we won't review them here.</p>
</div>
<p>See also <a href="qwizard.html">QWizard</a>, <a href="dialogs-licensewizard.html">License Wizard Example</a>, and <a href="dialogs-trivialwizard.html">Trivial Wizard Example</a>.</p>
<!-- @@@dialogs/classwizard -->
        <!-- /div -->
        <div class="feedback t_button">
          [+] Documentation Feedback</div>
      </div>
    </div>
    <div class="ft">
      <span></span>
    </div>
  </div> 
  <div class="footer">
    <p>
      <acronym title="Copyright">&copy;</acronym> 2008-2010 Nokia Corporation and/or its
      subsidiaries. Nokia, Qt and their respective logos are trademarks of Nokia Corporation 
      in Finland and/or other countries worldwide.</p>
    <p>
      All other trademarks are property of their respective owners. <a title="Privacy Policy"
        href="http://qt.nokia.com/about/privacy-policy">Privacy Policy</a></p>
  </div>
  <div id="feedbackBox">
      <div id="feedcloseX" class="feedclose t_button">X</div>
    <form id="feedform" action="http://doc.qt.nokia.com/docFeedbck/feedback.php" method="get">
      <p id="noteHead">Thank you for giving your feedback. <div class="note">Make sure it is related to this specific page. For more general bugs and 
      requests, please use the <a href="http://bugreports.qt.nokia.com/secure/Dashboard.jspa">Qt Bug Tracker</a>.</div></p>
      <p><textarea id="feedbox" name="feedText" rows="5" cols="40"></textarea></p>
      <p><input id="feedsubmit" class="feedclose" type="submit" name="feedback" /></p>
    </form>
  </div>
  <div id="blurpage">
  </div>
  <!--/div -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-4457116-5']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</body>
</html>
